{{template "base" .}}

{{define "content"}}
<div class="chat-container animate-fade-in">
    <header class="chat-header">
        <i class="fas fa-robot"></i>
        <div>
            <h2>{{T .Lang `ai_tester` }}</h2>
            <small class="text-muted">Direct communication with {{.App.AIProvider}} engine</small>
        </div>
    </header>

    <div class="chat-messages" id="chat-messages">
        <div class="message ai">
            Hello! I am the SlideForge AI engine. How can I help you refine your presentation logic today?
        </div>
    </div>

    <div class="chat-input-area">
        <form id="chat-form" hx-post="/ai-tester/chat" hx-target="#chat-messages" hx-swap="beforeend"
            hx-on::after-request="this.reset(); scrollChat()">
            <input type="text" name="prompt" class="chat-input" placeholder="Type your instruction to the AI..."
                required autocomplete="off">
            <button type="submit" class="btn-send">
                <i class="fas fa-paper-plane"></i>
                <span class="loading-indicator fas fa-circle-notch fa-spin"></span>
                <span>Send</span>
            </button>
        </form>
    </div>
</div>

<link rel="stylesheet" href="/static/css/ai_chat.css">
{{end}}

{{define "extra_js"}}
<script>
    function scrollChat() {
        const container = document.getElementById('chat-messages');
        container.scrollTop = container.scrollHeight;
    }

    // Scroll to top on load
    document.addEventListener('DOMContentLoaded', () => {
        scrollChat();
    });
</script>
{{end}}